<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:lang="${#locale.language}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="#{profile.edit.title} + ' | ' + #{app.name}">Edit Profile | Salon Loan Loan</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
        rel="stylesheet">
    <!-- Your CSS -->
    <link rel="stylesheet" th:href="@{/css/user-profile-edit.css}">
</head>

<body>
    <!-- ========== HEADER & NAVBAR ========== -->
    <div th:replace="fragments/header :: top-header"></div>
    <div th:replace="fragments/header :: navbar"></div>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="profile-edit-main">
        <div class="container py-5">
            <div class="row">
                <!-- Sidebar Navigation -->
                <div class="col-lg-3 mb-4">
                    <div class="profile-sidebar">
                        <div class="profile-avatar">
                            <div class="avatar-circle">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <h5 class="mt-3 mb-1" th:text="${user.username}">Username</h5>
                            <p class="text-muted small" th:text="#{profile.member.since}">Member since 2024</p>
                        </div>

                        <nav class="profile-nav mt-4">
                            <a href="#" class="nav-link active">
                                <i class="fa-solid fa-edit me-2"></i>
                                <span th:text="#{profile.edit.title}">Edit Profile</span>
                            </a>
                        </nav>
                    </div>
                </div>

                <!-- Profile Edit Content -->
                <div class="col-lg-9">
                    <div class="profile-edit-content">
                        <!-- Header -->
                        <div class="profile-header">
                            <h2 class="profile-title">
                                <i class="fa-solid fa-edit me-3"></i>
                                <span th:text="#{profile.edit.title}">Edit Profile</span>
                            </h2>
                            <p class="profile-subtitle" th:text="#{profile.edit.subtitle}">Update your account
                                information</p>
                        </div>

                        <!-- Success/Error Messages -->
                        <div th:if="${param.updated}" class="alert alert-success alert-dismissible fade show"
                            role="alert">
                            <i class="fa-solid fa-check-circle me-2"></i>
                            <span th:text="#{profile.edit.success}">Profile updated successfully!</span>
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>

                        <!-- Edit Form -->
                        <form th:action="@{/user/profile/update}" method="post" class="profile-edit-form" novalidate>

                            <!-- Basic Information -->
                            <div class="form-section">
                                <div class="section-header">
                                    <h5 class="section-title">
                                        <i class="fa-solid fa-user me-2"></i>
                                        <span th:text="#{profile.edit.section.title}">Basic Information</span>
                                    </h5>
                                    <p class="section-subtitle" th:text="#{profile.edit.section.subtitle}">Update your
                                        personal details</p>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="username" class="form-label required">
                                            <i class="fa-solid fa-at me-1"></i>
                                            <span th:text="#{label.username}">Username</span>
                                        </label>
                                        <input type="text" class="form-control" id="username" name="username"
                                            th:value="${user.username}" th:placeholder="${user.username}" required>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="email" class="form-label required">
                                            <i class="fa-solid fa-envelope me-1"></i>
                                            <span th:text="#{label.email}">Email</span>
                                        </label>
                                        <input type="email" class="form-control" id="email" name="email"
                                            th:value="${user.email}" th:placeholder="${user.email ?: 'â€”'}" required>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="phoneNumber" class="form-label required">
                                            <i class="fa-solid fa-phone me-1"></i>
                                            <span th:text="#{label.phone.number}">Phone Number</span>
                                        </label>
                                        <input type="tel" class="form-control" id="phoneNumber" name="phoneNumber"
                                            th:value="${user.phoneNumber}" th:placeholder="${user.phoneNumber}"
                                            required>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="gender" class="form-label">
                                            <i class="fa-solid fa-venus-mars me-1"></i>
                                            <span th:text="#{label.gender}">Gender</span>
                                        </label>
                                        <select class="form-select" id="gender" name="gender" th:field="*{user.gender}">
                                            <option value="" th:text="#{profile.edit.select.gender}">Select gender
                                            </option>
                                            <option value="MALE" th:text="#{profile.edit.gender.male}">Male</option>
                                            <option value="FEMALE" th:text="#{profile.edit.gender.female}">Female
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="birthDate" class="form-label">
                                            <i class="fa-solid fa-calendar me-1"></i>
                                            <span th:text="#{label.birth.date}">Birth Date</span>
                                        </label>
                                        <input type="date" class="form-control" id="birthDate" name="birthDate"
                                            th:value="${#temporals.format(user.birthDate, 'yyyy-MM-dd')}">
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="accountStatus" class="form-label">
                                            <i class="fa-solid fa-circle-check me-1"></i>
                                            <span th:text="#{label.account.status}">Account Status</span>
                                        </label>
                                        <input type="text" class="form-control" id="accountStatus" name="accountStatus"
                                            th:value="${user.accountStatus}" readonly>
                                    </div>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="form-actions">
                                <div class="row">
                                    <div class="col-md-6">
                                        <a href="/user/profile" class="btn btn-outline-secondary btn-lg w-100">
                                            <i class="fa-solid fa-arrow-left me-2"></i>
                                            <span th:text="#{profile.edit.cancel}">Cancel</span>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <button type="submit" class="btn btn-primary btn-lg w-100">
                                            <i class="fa-solid fa-save me-2"></i>
                                            <span th:text="#{profile.edit.save.changes}">Save Changes</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ========== FOOTER ========== -->
    <div th:replace="fragments/footer :: footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>