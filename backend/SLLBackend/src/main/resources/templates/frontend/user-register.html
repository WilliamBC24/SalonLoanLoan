<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="pageTitle"></title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
        rel="stylesheet">
    <!-- Your CSS -->
    <link rel="stylesheet" href="../../static/css/user-register.css">
</head>

<body>
    <!-- ========== REGISTER WRAPPER ========== -->
    <div class="register-wrapper">
        <!-- Background Pattern -->
        <div class="bg-pattern"></div>
        
        <!-- Register Card -->
        <div class="register-card">
            <!-- Header -->
            <div class="register-header">
                <h1 id="registerTitle" class="register-title"></h1>
            </div>

            <!-- Success/Error Messages -->
            <div class="alert alert-success alert-dismissible fade show" role="alert" id="successAlert" style="display: none;">
                <i class="fa-solid fa-check-circle me-2"></i>
                <span id="successMessage"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <div class="alert alert-danger alert-dismissible fade show" role="alert" id="errorAlert" style="display: none;">
                <i class="fa-solid fa-exclamation-circle me-2"></i>
                <span id="errorMessage"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <!-- Register Form -->
            <form id="registerForm" class="register-form" novalidate>
                <!-- Username -->
                <div class="form-group mb-3">
                    <label for="username" class="form-label required">
                        <span id="usernameLabel"></span>
                    </label>
                    <input type="text" class="form-control" id="username" name="username" 
                           placeholder="" required>
                    <div class="invalid-feedback" id="usernameError">
                        
                    </div>
                </div>

                <!-- Password -->
                <div class="form-group mb-3">
                    <label for="password" class="form-label required">
                        <span id="passwordLabel"></span>
                    </label>
                    <input type="password" class="form-control" id="password" name="password" 
                           placeholder="" required>
                    <div class="invalid-feedback" id="passwordError">
                        
                    </div>
                </div>

                <!-- Gender -->
                <div class="form-group mb-3">
                    <label for="gender" class="form-label required">
                        <span id="genderLabel"></span>
                    </label>
                    <select class="form-select" id="gender" name="gender" required>
                        <option value="" id="genderPlaceholder"></option>
                        <option value="male" id="genderMale"></option>
                        <option value="female" id="genderFemale"></option>
                        <option value="other" id="genderOther"></option>
                    </select>
                    <div class="invalid-feedback" id="genderError">
                        
                    </div>
                </div>

                <!-- Birth Date -->
                <div class="form-group mb-3">
                    <label for="birthDate" class="form-label">
                        <span id="birthDateLabel"></span>
                    </label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="birthDate" name="birthDate" 
                               placeholder="">
                        <span class="input-group-text">
                            <i class="fa-solid fa-calendar"></i>
                        </span>
                    </div>
                </div>

                <!-- Phone Number -->
                <div class="form-group mb-3">
                    <label for="phone" class="form-label required">
                        <span id="phoneLabel"></span>
                    </label>
                    <input type="tel" class="form-control" id="phone" name="phone" 
                           placeholder="" required>
                    <div class="invalid-feedback" id="phoneError">
                        
                    </div>
                </div>

                <!-- Email (optional) -->
                <div class="form-group mb-3">
                    <label for="email" class="form-label">
                        <span id="emailLabel"></span>
                    </label>
                    <input type="email" class="form-control" id="email" name="email" 
                           placeholder="">
                    <div class="invalid-feedback" id="emailError">
                        
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-lg w-100" id="registerButton">
                        <span class="button-text" id="registerButtonText"></span>
                        <span class="spinner-border spinner-border-sm ms-2" role="status" 
                              aria-hidden="true" style="display: none;"></span>
                    </button>
                </div>

                <!-- Login Link -->
                <div class="text-center mt-4">
                    <p class="mb-0 login-text">
                        <span id="loginText"></span> <a href="login.html" class="login-link" id="loginLink"></a>
                    </p>
                </div>
            </form>
        </div>

        <!-- Side Icons -->
        <div class="side-icons">
            <div class="icon-item">
                <i class="fa-solid fa-search-plus"></i>
            </div>
            <div class="icon-item">
                <i class="fa-solid fa-th"></i>
            </div>
            <div class="icon-item">
                <i class="fa-solid fa-comment"></i>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/app.js"></script>
    <script>
        // Register page specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registerForm');
            const registerButton = document.getElementById('registerButton');
            const buttonText = registerButton.querySelector('.button-text');
            const spinner = registerButton.querySelector('.spinner-border');

            // Form validation and submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!form.checkValidity()) {
                    e.stopPropagation();
                    form.classList.add('was-validated');
                    return;
                }

                // Show loading state
                registerButton.disabled = true;
                buttonText.textContent = (document.getElementById('registeringText') ? document.getElementById('registeringText').textContent : buttonText.textContent);
                spinner.style.display = 'inline-block';

                // Simulate API call
                setTimeout(() => {
                    // Show success message
                    document.getElementById('successAlert').style.display = 'block';
                    
                    // Reset button state
                    registerButton.disabled = false;
                    buttonText.textContent = (document.getElementById('registerButtonText') ? document.getElementById('registerButtonText').textContent : buttonText.textContent);
                    spinner.style.display = 'none';
                    
                    // Remove validation classes
                    form.classList.remove('was-validated');
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, 2000);
            });

            // Date input formatting
            const birthDateInput = document.getElementById('birthDate');
            birthDateInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2);
                }
                if (value.length >= 5) {
                    value = value.substring(0, 5) + '/' + value.substring(5, 9);
                }
                e.target.value = value;
            });

            // Password validation
            const passwordInput = document.getElementById('password');
            passwordInput.addEventListener('input', function(e) {
                const password = e.target.value;
                const hasUpperCase = /[A-Z]/.test(password);
                const hasMinLength = password.length >= 8;
                
                if (password && (!hasUpperCase || !hasMinLength)) {
                    e.target.setCustomValidity(document.getElementById('passwordError') ? document.getElementById('passwordError').textContent : '');
                } else {
                    e.target.setCustomValidity('');
                }
            });

            // Phone number formatting
            const phoneInput = document.getElementById('phone');
            phoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 0) {
                    if (value.length <= 3) {
                        value = value;
                    } else if (value.length <= 6) {
                        value = value.substring(0, 3) + '-' + value.substring(3);
                    } else {
                        value = value.substring(0, 3) + '-' + value.substring(3, 6) + '-' + value.substring(6, 10);
                    }
                }
                e.target.value = value;
            });
        });
    </script>
</body>

</html>